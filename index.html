<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Simple-bitbucket-commit-checker : Simple, and easy to use, commit checker for Atlassian Stash">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Simple-bitbucket-commit-checker</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/tomasbjerre/simple-bitbucket-commit-checker">View on GitHub</a>

          <h1 id="project_title">Simple-bitbucket-commit-checker</h1>
          <h2 id="project_tagline">Simple, and easy to use, commit checker for Atlassian Stash</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/tomasbjerre/simple-bitbucket-commit-checker/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/tomasbjerre/simple-bitbucket-commit-checker/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a id="simple-bitbucket-commit-checker-" class="anchor" href="#simple-bitbucket-commit-checker-" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Simple Bitbucket Commit Checker <a href="https://travis-ci.org/tomasbjerre/simple-bitbucket-commit-checker"><img src="https://travis-ci.org/tomasbjerre/simple-bitbucket-commit-checker.svg?branch=master" alt="Build Status"></a>
</h1>

<p>Simple, and easy to use, commit checker for Atlassian Bitbucket. There are many commit checkers out there. This plugin aims at being simple and user friendly. The admin GUI (<a href="https://raw.githubusercontent.com/tomasbjerre/simple-bitbucket-commit-checker/master/sandbox/admin_upper.png">here</a> and <a href="https://raw.githubusercontent.com/tomasbjerre/simple-bitbucket-commit-checker/master/sandbox/admin_lower.png">here</a>) allows the Bitbucket administrator to add custom messages for each rejection reason. <a href="https://github.com/tomasbjerre/simple-bitbucket-commit-checker/blob/master/src/test/resources/testProdThatRejectResponseLooksGood.txt">Here</a> is a sample reject message and <a href="https://github.com/tomasbjerre/simple-bitbucket-commit-checker/blob/master/src/test/resources/testProdThatSuccessResponseLooksGood.txt">here</a> is a sample accept message. <a href="https://raw.githubusercontent.com/tomasbjerre/simple-bitbucket-commit-checker/master/sandbox/config_and_reject.png">This</a> is a screenshot of a push being rejected.</p>

<p>Available in <a href="https://marketplace.atlassian.com/plugins/se.bjurr.sscc.sscc">Atlassian Marketplace</a>.</p>

<h2>
<a id="features" class="anchor" href="#features" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Features</h2>

<ul>
<li>Check author in commit

<ul>
<li>email is same as users email in Bitbucket.</li>
<li>name is same as users name in Bitbucket.</li>
</ul>
</li>
<li>Check that author name, and/or email, in commit exists for any user in Bitbucket</li>
<li>Check committer in commit

<ul>
<li>email is same as users email in Bitbucket.</li>
<li>name is same as users name in Bitbucket.</li>
</ul>
</li>
<li>Optionally check author email against regular expression instead of equality to email in Bitbucket. Like:

<ul>
<li>^${BITBUCKET_USER}@.*</li>
<li>^[^@]*@company.domain$</li>
</ul>
</li>
<li>Check that changed content does not match a specific regexp, like unresolved merge.</li>
<li>Check size of commits, so that large files don't accidently gets pushed.</li>
<li>Check JQL query. Can be used to check that any JIRA is in a specific state. There is an extra variable, ${REGEXP}, available for use in the query.

<ul>
<li>Example: issue = ${REGEXP} AND status = "In Progress" AND assignee in ("${BITBUCKET_USER}")</li>
</ul>
</li>
<li>Simple configuration of rules that must apply to commit messages. Organized in groups.

<ul>
<li>A group can be used for matching, for example, issues. It can state that "at least one", "all of" or "none" of the issues can be mentioned in the commit messages.</li>
<li>Rules are added to the group. A rule can, for example, define Jira as a regular expression and the name "Jira".</li>
<li>If a group matches a commit, it can reject it or just show a message to the comitter.</li>
</ul>
</li>
<li>Check only branches matching a regular expression.</li>
<li>Check that branch name matches specific regexp.</li>
<li>Exclude merge commits.</li>
<li>Exclude tag commits.</li>
<li>Check commits in pull requests</li>
<li>Show a general reject message.</li>
<li>Show a general accept message.</li>
<li>Optionally accept all commits from <a href="https://developer.atlassian.com/static/javadoc/bitbucket-server/4.0.3/api/reference/com/atlassian/bitbucket/user/UserType.html">service users</a>.</li>
<li>Optionally accept all commits if pattern matches the username. Checks will be ignored for user if pattern matches its name, like ^BATCH.* will ignore users with name starting with BATCH.</li>
<li>Dry run mode, where all commits are accepted. But verification results are shown.</li>
<li>Supporting variables to be used in error messages and checks.

<ul>
<li>BITBUCKET_EMAIL, Email of user in Bitbucket.</li>
<li>BITBUCKET_NAME Name of user in Bitbucket.</li>
<li>COMMITTER_EMAIL, Email of committer name.</li>
<li>COMMITTER_NAME, Name of committer email.</li>
<li>AUTHOR_EMAIL, Email of author email.</li>
<li>AUTHOR_NAME, Name of author name.</li>
<li>BITBUCKET_USER, Username of user in Bitbucket.</li>
</ul>
</li>
</ul>

<p>The plugin is configured on repository level, where all hooks are configured. If you want to configure it once for all repos, have a look at <a href="https://github.com/tomasbjerre/settings-synchronizer-for-bitbucket-plugin">Settings Synchronizer for Bitbucket</a>.</p>

<h2>
<a id="design-goals" class="anchor" href="#design-goals" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Design goals</h2>

<p>The included features should:</p>

<ul>
<li>Be easy to configure as an administrator of Bitbucket. Any rejection reason delivered to the committer should be configurable.</li>
<li>Be easy to use as a committer. With user friendly rejection messages, that clearly explains what was wrong and how to fix it.</li>
</ul>

<h2>
<a id="developer-instructions" class="anchor" href="#developer-instructions" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Developer instructions</h2>

<p>You will need Atlas SDK to compile the code.</p>

<p><a href="https://developer.atlassian.com/docs/getting-started/set-up-the-atlassian-plugin-sdk-and-build-a-project">https://developer.atlassian.com/docs/getting-started/set-up-the-atlassian-plugin-sdk-and-build-a-project</a></p>

<p>You can generate Eclipse project:</p>

<pre><code>atlas-compile eclipse:eclipse
</code></pre>

<p>Package the plugin:</p>

<pre><code>atlas-package
</code></pre>

<p>Run Bitbucket, with the plugin, on localhost:</p>

<pre><code>export MAVEN_OPTS=-Dplugin.resource.directories=`pwd`/src/main/resources
mvn bitbucket:run
</code></pre>

<p>You can also remote debug on port 5005 with:</p>

<pre><code>atlas-debug
</code></pre>

<p>Make a release:</p>

<p><a href="https://developer.atlassian.com/docs/common-coding-tasks/development-cycle/packaging-and-releasing-your-plugin">https://developer.atlassian.com/docs/common-coding-tasks/development-cycle/packaging-and-releasing-your-plugin</a></p>

<pre><code>mvn release:prepare
mvn release:perform
</code></pre>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Simple-bitbucket-commit-checker maintained by <a href="https://github.com/tomasbjerre">tomasbjerre</a></p>
        <p>Published with <a href="https://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
